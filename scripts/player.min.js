var player=function(){var a={tracklist:[],current:0,playing:!1,currentAlbum:1,init:function(){return this.loadTracks(),$(document).on("play pause",function(){console.log("event play"),a.changeTitle()}),$(document).on("keydown",function(b){var c=32,d=37,e=39;return b.keyCode==c?(a.playing?a.pause():a.play(),!1):b.keyCode==d?(a.prev(),!1):b.keyCode==e?(a.next(),!1):void 0}),this},loadTracks:function(){$("#tracklist a").each(function(b){var c="music/01/wiredin_01_"+$(this).attr("data-music");$(this).attr("data-index",b),a.tracklist[b]=$("<audio></audio>").appendTo("body").attr("preload",0!=b?"none":"auto").css("display","none").append('<source src="'+c+'.mp3" type="audio/mpeg" />').append('<source src="'+c+'.m4a" type="audio/mp4a-latm" />').append('<source src="'+c+'.ogg" type="audio/ogg" />').get(0),a.tracklist[b].addEventListener("ended",function(){a.next()}),a.tracklist[b].addEventListener("progress",function(){if(this.buffered.length>0){var b=this.buffered.end(this.buffered.length-1)/this.duration*100;b>95&&a.preloadNext()}})})},preloadNext:function(){var a;a=this.current==this.tracklist.length-1?this.current=0:this.current+1,"auto"!=this.tracklist[a].preload&&(this.tracklist[a].preload="auto",console.log("preloading "+a))},prev:function(){this.play(0==this.current?this.tracklist.length-1:this.current-1)},next:function(){this.play(this.current==this.tracklist.length-1?0:this.current+1)},play:function(a){this.tracklist.length>0&&(null==a?($("#tracklist a").removeClass("playing").removeClass("paused"),$("#tracklist a[data-index="+this.current+"]").removeClass("paused").addClass("playing"),$("#toggle-play").removeClass("play").addClass("pause"),$("#prev, #next").removeClass("hidden"),this.tracklist[this.current].play(),this.playing=!0,console.log("play"),$.event.trigger("play")):(a=parseInt(a),a>=0&&a<this.tracklist.length&&(a==this.current?this.playing?this.pause():this.play():(this.stop(),this.current=a,console.log("go to "+a),this.play()))))},stop:function(){this.playing&&(this.tracklist[this.current].pause(),0!=this.tracklist[this.current].currentTime&&(this.tracklist[this.current].currentTime=0),console.log("stop"))},pause:function(){this.tracklist[this.current].pause(),$("#tracklist a[data-index="+this.current+"]").removeClass("playing").addClass("paused"),$("#toggle-play").removeClass("pause").addClass("play"),$("#prev, #next").addClass("hidden"),this.playing=!1,console.log("pause"),$.event.trigger("pause")},changeTitle:function(){if(this.playing){var a=$("#tracklist a").eq(this.current).attr("data-artist"),b=$("#tracklist a").eq(this.current).attr("data-track"),c=decodeURIComponent("%E2%96%B6")+" "+a+" - "+b;document.title=c}else document.title="wiredIn(1)"}};return a.init()}();$("a").click(function(a){a.preventDefault()}),$("#prev-album").click(function(){$(this).hasClass("disabled")||console.log("prev album")}),$("#next-album").click(function(){$(this).hasClass("disabled")||console.log("next album")}),$("#prev").click(function(){player.prev(),_gaq.push(["_trackEvent","controls","wiredIn("+player.currentAlbum+")","prev"])}),$("#next").click(function(){player.next(),_gaq.push(["_trackEvent","controls","wiredIn("+player.currentAlbum+")","next"])}),$("#toggle-play").click(function(){player.playing?(player.pause(),_gaq.push(["_trackEvent","controls","wiredIn("+player.currentAlbum+")","pause"])):(player.play(),_gaq.push(["_trackEvent","controls","wiredIn("+player.currentAlbum+")","play"]))}),$("#tracklist a").click(function(){player.play($(this).attr("data-index")),_gaq.push(["_trackEvent","tracklist","wiredIn("+player.currentAlbum+")",$(this).attr("data-music")])});